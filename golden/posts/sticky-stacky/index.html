<!doctype html> <html lang=en-US itemscope=itemscope itemtype=https://schema.org/WebPage> <head> <title>Brian Anders | Sticky Stacky Peeking Navigation Bars</title> <meta name=description content="At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page."/> <meta charset=UTF-8 /> <meta http-equiv=content-type content="text/html; charset=UTF-8"/> <meta http-equiv=X-UA-Compatible content="IE=edge"/> <meta name=apple-mobile-web-app-capable content=yes /> <meta name=apple-mobile-web-app-status-bar-style content=#212121 /> <meta name=theme-color content=#212121 /> <meta name=mobile-web-app-capable content=yes /> <meta name=viewport content="width=device-width,initial-scale=1"/> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"/> <meta name=keywords content="Brian, Anders, Brian Anders"/> <meta name=description content="At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page."/> <meta name=author content="Brian Anders"/> <meta itemprop=name content="Brian Anders"/> <meta itemprop=description content="At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page."/> <meta itemprop=image content=/images/favicon_base.png /> <link rel=canonical href=https://briananders.com/posts/sticky-stacky/ /> <meta name=twitter:card content=summary /> <meta name=twitter:url content=https://briananders.com/posts/sticky-stacky/ /> <meta name=twitter:site content=@imbanders /> <meta name=twitter:creator content=@imbanders /> <meta name=twitter:title content="Brian Anders"/> <meta name=twitter:description content="At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page."/> <meta name=twitter:image content=/images/favicon_base.png /> <meta property=og:type content=profile /> <meta property=og:url content=/posts/sticky-stacky/ /> <meta property=og:title content="Brian Anders"/> <meta property=og:image content=/images/favicon_base.png /> <meta property=og:description content="At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page."/> <meta property=og:site_name content="Brian Anders"/> <link rel="shortcut icon" href=/images/favicon_144.png /> <link rel=icon href=/images/favicon_144.png /> <link rel=apple-touch-icon href=/images/favicon_144.png /> <link rel=apple-touch-icon-precomposed href=/images/favicon_144.png /> <meta itemprop=copyrightHolder content="Brian Anders"/> <meta itemprop=copyrightYear content=2025 /> <meta itemprop=isFamilyFriendly content=true /> <meta name=build-id content=731fc8f209a31c76a2cae9c3f9cd4268f0deb6da /> <meta name=build-datetime content=2025-10-20T06:35:19.123Z /> <meta itemprop=author content="Brian Anders"/> <meta itemprop=datePublished content=2022-07-08 /> <meta itemprop=publisher content="Brian Anders"/> <link rel=preconnect href=https://www.googletagmanager.com crossorigin/> <link rel=preconnect href=https://www.google-analytics.com crossorigin/> <script>((e,t,a,g)=>{e[g]=e[g]||[],e[g].push({"gtm.start":(new Date).getTime(),event:"gtm.js"}),e=t.getElementsByTagName(a)[0],(g=t.createElement(a)).async=!0,g.defer=!0,g.src="https://www.googletagmanager.com/gtm.js?id=GTM-5KZW4HX",e.parentNode.insertBefore(g,e)})(window,document,"script","dataLayer")</script> <link rel=preconnect href=https://fonts.gstatic.com crossorigin/> <link rel=preconnect href=https://fonts.googleapis.com crossorigin/> <link rel=preload media=all href="https://fonts.googleapis.com/css?family=Roboto:300,500|Source+Serif+Pro&display=swap" lazyload onload="this.onload=null,this.rel=&#34;stylesheet&#34;" as=style /> <noscript> <link rel=stylesheet media=all href="https://fonts.googleapis.com/css?family=Roboto:300,500|Source+Serif+Pro&display=swap"/> </noscript> <style>a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1.3}ol:not(.default),ul:not(.default){list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}*{transition-timing-function:ease;transition-duration:.5s;transition-property:none;border-radius:3px}*,::after,::before{box-sizing:border-box;outline:0}::selection{mixin:selection;text-shadow:none;background-color:#f57f17;color:#212121;-webkit-text-fill-color:#212121}::-moz-selection{mixin:selection;text-shadow:none;background-color:#f57f17;color:#212121;-webkit-text-fill-color:#212121}::-webkit-selection{mixin:selection;text-shadow:none;background-color:#f57f17;color:#212121;-webkit-text-fill-color:#212121}[aria-hidden=true]{display:none;visibility:hidden}[role=list]{mixin:list;mixin:paragraph;width:100%;margin-left:auto;margin-right:auto;width:min(600px,100%);margin-bottom:36px;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}[role=list]:last-child{margin-bottom:0}[role=listitem]{mixin:list-item;margin-bottom:18px}[role=listitem]:last-of-type{margin-bottom:0}i{mixin:italic;font-style:italic}section{mixin:section;width:min(1320px,100%);margin-left:auto;margin-right:auto;margin-bottom:120px}section:last-child{margin-bottom:0}main{margin-left:auto;margin-right:auto;z-index:1;position:relative;transition-property:right,min-height;right:0;min-height:100vh}html{mixin:html;min-height:100%;font-size:62.5%;position:relative;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;overflow-x:hidden;color:#fff;background-color:#212121;text-wrap:pretty;--palette--primary-white:#ffffff;--palette--primary-grey:#212121;--palette--hover-grey:#424242;--palette--secondary-grey:#757575;--palette--divider-color:#f57f17;--palette--error:#ef5350;--palette--primary-color-dark:#cd4800;--palette--primary-color-light:#f57f17;--palette--accent-color:#69f0ae;--border-radius:3px;--transition-speed:500ms;--transition-timing:ease}body{overflow-x:hidden;width:100%;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}p{mixin:paragraph;width:100%;margin-left:auto;margin-right:auto;width:min(600px,100%);margin-bottom:36px;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}p:last-child{margin-bottom:0}h1,h2,h3,h4,h5,h6{mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000}h1{mixin:type--heading-1;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:36px;line-height:54px;margin-bottom:36px}h2{mixin:type--heading-2;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:33px;line-height:49.5px;margin-bottom:36px}h3{mixin:type--heading-3;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:30px;line-height:45px;margin-bottom:24px}h4{mixin:type--heading-4;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:27px;line-height:40.5px;margin-bottom:18px}h5{mixin:type--heading-5;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:24px;line-height:36px;margin-bottom:18px}h6{mixin:type--heading-6;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:21px;line-height:31.5px;margin-bottom:18px}img{max-width:100%;height:auto;display:inline-block}cite{mixin:citation;float:right}cite a{mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;text-decoration:none}blockquote{mixin:quotation;margin-left:auto;margin-right:auto;mixin:paragraph-margin;padding:24px 24px;overflow:hidden;max-width:500px;background-color:transparent;border:2px solid #f57f17;color:#fff}blockquote,blockquote:last-child{margin-bottom:36px}blockquote p:last-of-type{margin-bottom:0}blockquote p::after,blockquote p::before{content:'"'}strong{font-weight:500}date{text-align:right;display:block;mixin:type--bold-serif;font-family:"Source Serif Pro",serif;font-weight:500}label{mixin:label;mixin:type--heading-6;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:21px;line-height:31.5px;margin-bottom:18px;padding:0 18px;mixin:type--regular-sans-serif;font-family:Roboto,sans-serif;font-weight:300}list,ol,ul{mixin:list;mixin:paragraph;width:100%;margin-left:auto;margin-right:auto;width:min(600px,100%);margin-bottom:36px;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}list:last-child,ol:last-child,ul:last-child{margin-bottom:0}ol:not(.default){list-style:decimal;padding-left:24px}item,li{mixin:list-item;margin-bottom:18px}item:last-of-type,li:last-of-type{margin-bottom:0}button{font-family:unset;font-size:unset;line-height:unset;margin:unset;padding:unset;border:unset;cursor:pointer}button:not(.button):not([class*=link]){mixin:button-element;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;color:#fff;background-color:#212121;border-radius:3px;height:39px;padding:2px 6px 0;border:1px solid #f57f17;mixin:link-focus;mixin:link-hover;transition-property:background-color}button:not(.button):not([class*=link]):focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}button:not(.button):not([class*=link]):hover{background-color:#424242}select{mixin:select;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;color:#fff;background-color:#212121;appearance:menulist;border-radius:3px;height:39px;padding:0 6px;border:1px solid #757575;cursor:pointer;mixin:link-focus}select:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}input[type=checkbox],input[type=radio]{mixin:checkbox;cursor:pointer;height:24px;width:24px;margin:unset;mixin:link-focus}input[type=checkbox]:focus,input[type=radio]:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}input[type=number],input[type=text]{mixin:input;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;color:#fff;background-color:#212121;min-width:72px;border-radius:3px;height:39px;padding:0 6px;border:1px solid #757575}input[type=range]{mixin:input-range;height:39px;cursor:pointer;mixin:link-focus}input[type=range]:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}input[type=checkbox].toggle{appearance:none;position:relative;display:inline-block;width:48px;height:18px;background-color:#fff;border-radius:12px;border:none}input[type=checkbox].toggle:focus{box-shadow:none;background-color:#fff!important}input[type=checkbox].toggle::before{content:'';position:absolute;width:24px;height:24px;border-radius:12px;background-color:#69f0ae;top:-3px;left:-3px;transition:left .5s,background-color .5s;box-shadow:0 0 6px #212121}input[type=checkbox].toggle:checked{background-color:#69f0ae}input[type=checkbox].toggle:checked::before{left:calc(100% - 21px)}input[type=checkbox].toggle:checked:focus{background-color:#69f0ae!important}.html{mixin:html;min-height:100%;font-size:62.5%;position:relative;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;overflow-x:hidden;color:#fff;background-color:#212121;text-wrap:pretty;--palette--primary-white:#ffffff;--palette--primary-grey:#212121;--palette--hover-grey:#424242;--palette--secondary-grey:#757575;--palette--divider-color:#f57f17;--palette--error:#ef5350;--palette--primary-color-dark:#cd4800;--palette--primary-color-light:#f57f17;--palette--accent-color:#69f0ae;--border-radius:3px;--transition-speed:500ms;--transition-timing:ease}.description,.section{mixin:section;width:min(1320px,100%);margin-left:auto;margin-right:auto;margin-bottom:120px}.description:last-child,.section:last-child{margin-bottom:0}.description{mixin:paragraph-margin}.description,.description:last-child{margin-bottom:36px}.p,.paragraph{mixin:paragraph;width:100%;margin-left:auto;margin-right:auto;width:min(600px,100%);margin-bottom:36px;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}.p:last-child,.paragraph:last-child{margin-bottom:0}.i,.italic{mixin:italic;font-style:italic}.container,.content{mixin:content;mixin:content-width;max-width:1020px;margin-left:auto;margin-right:auto;position:relative;padding:0 12px}@media (min-width:600px){.container,.content{padding:0 36px}}.error{color:#f44336;text-align:center}.block{display:block}.center{text-align:center;justify-content:center}.block{display:block}.center{text-align:center;justify-content:center}.block-center{margin-left:auto;margin-right:auto}.p,.paragraph{mixin:paragraph;width:100%;margin-left:auto;margin-right:auto;width:min(600px,100%);margin-bottom:36px;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px}.p:last-child,.paragraph:last-child{margin-bottom:0}.p-margin,.paragraph-margin{mixin:paragraph-margin}.p-margin,.p-margin:last-child,.paragraph-margin,.paragraph-margin:last-child{margin-bottom:36px}.video-container{width:100%;height:0;position:relative}.video-container video{width:100%;height:100%;position:absolute;top:0;left:0}.block-link-wrapper{display:block}.select{mixin:select;mixin:type--body;mixin:type--regular-serif;font-family:"Source Serif Pro",serif;font-weight:300;mixin:font-size;font-size:18px;line-height:27px;color:#fff;background-color:#212121;appearance:menulist;border-radius:3px;height:39px;padding:0 6px;border:1px solid #757575;cursor:pointer;mixin:link-focus}.select:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}.inline-link{mixin:inline-link;mixin:link-base;position:relative;background-color:transparent;text-decoration:none;overflow:hidden;padding:2px 0 0;display:inline-flex;color:#f57f17;mixin:link-hover;transition-property:background-color;mixin:link-focus}.inline-link:hover{background-color:#424242}.inline-link:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}.inline-link:hover{mixin:link-base;position:relative;background-color:transparent;text-decoration:none;overflow:hidden;text-decoration:underline}.block-link{mixin:block-link;mixin:link-base;position:relative;background-color:transparent;text-decoration:none;overflow:hidden;padding:2px 6px 0;margin-left:-6px;display:inline-flex;color:#fff;mixin:link-hover;transition-property:background-color;mixin:link-focus}.block-link:hover{background-color:#424242}.block-link:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}.block-link b{transition-property:transform;padding-left:.2rem;transform:scaleY(1.5) translateY(.03rem);color:#f57f17}.block-link:hover b{transform:scaleY(1.5) translateY(.03rem) translateX(.2rem)}.button,.button-link{mixin:button-link;mixin:link-base;position:relative;background-color:transparent;text-decoration:none;overflow:hidden;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;display:inline-flex;justify-content:center;align-items:center;padding:12px 36px;margin:12px;border-radius:3px;color:#fff;border:2px solid #f57f17;mixin:link-hover;transition-property:background-color;mixin:link-focus}.button-link:hover,.button:hover{background-color:#424242}.button-link:focus,.button:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}.button-link.mega-button,.button.mega-button{mixin:mega-button;padding:12px 24px}.card-link{mixin:card-link;mixin:link-base;position:relative;background-color:transparent;text-decoration:none;overflow:hidden;display:grid;border-radius:3px;color:#fff;box-shadow:0 10px 90px 0 #111;padding:12px;mixin:link-hover;transition-property:background-color;mixin:link-focus}.card-link:hover{background-color:#424242}.card-link:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}.h1{mixin:type--heading-1;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:36px;line-height:54px;margin-bottom:36px}.h2{mixin:type--heading-2;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:33px;line-height:49.5px;margin-bottom:36px}.h3{mixin:type--heading-3;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:30px;line-height:45px;margin-bottom:24px}.h4{mixin:type--heading-4;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:27px;line-height:40.5px;margin-bottom:18px}.h5{mixin:type--heading-5;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:24px;line-height:36px;margin-bottom:18px}.h6{mixin:type--heading-6;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:21px;line-height:31.5px;margin-bottom:18px}</style> <link rel=preload media=all href=/styles/posts/code.css lazyload onload="this.onload=null,this.rel=&#34;stylesheet&#34;" as=style /> <noscript> <link rel=stylesheet media=all href=/styles/posts/code.css /> </noscript> <link rel=preload media=all href=/styles/posts/sticky-stacky.css lazyload onload="this.onload=null,this.rel=&#34;stylesheet&#34;" as=style /> <noscript> <link rel=stylesheet media=all href=/styles/posts/sticky-stacky.css /> </noscript> <script>window.onerror=function(r,e,o,a,n){r.toLowerCase();r=["Message: "+r,"URL: "+e,"Line: "+o,"Column: "+a,"Error object: "+JSON.stringify(n)].join(" - ");dataLayer.push({event:"gaEvent",gaCategory:"javascript error",gaAction:r})}</script> </head> <body> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5KZW4HX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript> <style>html{background-color:#212121;color:#fff}</style> <script src=/scripts/all.js async defer=defer></script> <style>.sticky-container{height:var(--sticky-container-height);position:relative;z-index:998}.sticky-container .sticky-stacky{position:relative;z-index:999}.sticky-container .sticky-stacky.fixed{position:fixed;z-index:1000;top:var(--previous-heights);transform:translateY(var(--sticky-stacky-transform))}html{--nav-height:72px;--window-height:calc(100vh - 72px)}#nav-overlay{width:100%;height:100%;display:none;position:fixed;left:0;top:0}#nav-overlay.visible{display:block}nav.main{border-radius:0;margin:0;transition-property:opacity;z-index:1000;width:100%;position:relative;color:#fff;background-color:#212121}nav.main *{position:relative;z-index:1}nav.main::after{content:'';width:100%;height:4px;display:block;position:absolute;bottom:-4px;background:linear-gradient(to left,#f57f17,#cd4800)}nav.main a,nav.main a:visited,nav.main button{padding:0}nav.main .container,nav.main .content{overflow:visible;align-items:center;display:flex;justify-content:space-between;min-height:72px;color:#fff;background-color:#212121}nav.main .container::after,nav.main .content::after{display:block;content:"";position:absolute;color:#fff;background-color:#212121;top:0;bottom:0;left:100%;width:100vw}nav.main .menu{font-weight:300;padding:4px 8px;cursor:pointer;mixin:link-focus}nav.main .menu:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}nav.main #nav-tray{z-index:0;position:absolute;top:calc(100% + 12px);transform-origin:calc(100% - (12px + 20px)) calc(-1 * 12px);transform:rotateY(90deg);display:grid;right:12px;transition-property:transform;color:#fff;background-color:#212121;box-shadow:0 0 0 2px #f57f17;padding:6px}nav.main #nav-tray.slide-in{transform:rotateY(0)}@media (min-width:600px){nav.main #nav-tray{right:36px}}nav.main #nav-tray .block-link{padding:2px 6px 0;margin-left:0}nav.main #top-triangle{top:-24px;right:20px;border-bottom-color:#f57f17}nav.main #top-triangle,nav.main #top-triangle::after{position:absolute;width:24px;height:24px;border-style:solid;border-width:12px;border-radius:0;border-top-color:transparent;border-left-color:transparent;border-right-color:transparent}nav.main #top-triangle::after{content:'';left:-12px;top:-12px;border-bottom-color:#212121;transform:translateY(2px)}nav.main .brand{width:auto;max-width:min(calc(100% - 78px),200px);display:flex;justify-content:flex-start;align-items:middle;color:#fff;background-color:#212121;border:none;mixin:link-focus}nav.main .brand::after{top:4px;height:calc(100% - 8px)}nav.main .brand svg{width:100%;height:auto}nav.main .brand:focus{box-shadow:0 0 0 2px #212121,0 0 0 4px #757575}#skip-nav{color:#fff;background-color:#212121;position:fixed;left:50%;transform:translateX(-50%);width:auto;z-index:10000000;padding:12px;margin:auto;border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:0 0 12px #000}#skip-nav[data-state=inactive]{top:-100%}#skip-nav[data-state=active]{top:0}header.main-header{color:#fff;background-color:#212121;margin-top:36px;margin-left:auto;margin-right:auto}header.main-header h1.name{mixin:type--title;mixin:type--headings;mixin:type--bold-sans-serif;font-family:Roboto,sans-serif;font-weight:500;text-align:center;text-shadow:0 2px 4px #000;mixin:font-size;font-size:39px;line-height:58.5px;margin-bottom:36px;text-align:center}</style> <div id=skip-nav tabindex=-1 data-state=inactive> <button class=button>Skip navigation</button> </div> <div id=nav-overlay></div> <div class=sticky-container> <nav class="sticky-stacky main nav" role=navigation aria-label="Main navigation"> <div class=content> <a itemprop=url href=/ class=brand aria-label="Brian Anders home page"><svg xmlns=http://www.w3.org/2000/svg width=3437 height=1172 fill=none viewBox="0 0 3437 1172"><mask id=a width=2919 height=780 x=448.047 y=206 fill=#000 maskUnits=userSpaceOnUse><path fill=#fff d="M448.047 206h2919v780h-2919z"/><path d="M820.469 404.477 647.129 966H463.047l261.23-710.938h116.7zM964.023 966 790.195 404.477l-22.461-149.415h118.164L1148.59 966zm-6.835-265.137v132.325H592.441V700.863z"/><path d="M1271.21 550.473V966h-164.55V437.68h154.3zm-19.53 133.3-38.57.977q0-60.548 14.64-107.91c9.77-31.901 23.6-58.919 41.51-81.055q26.85-33.203 63.96-50.293c25.07-11.719 52.9-17.578 83.5-17.578 24.41 0 46.71 3.581 66.89 10.742q30.765 10.743 52.74 34.668c14.97 15.951 26.36 37.11 34.18 63.477 8.14 26.041 12.2 58.268 12.2 96.679V966h-165.52V632.992q0-31.738-8.79-48.34c-5.86-11.393-14.32-19.205-25.39-23.437s-24.58-6.348-40.53-6.348c-16.93 0-31.25 3.255-42.97 9.766q-17.58 9.765-28.32 27.344c-6.83 11.393-11.88 24.902-15.14 40.527-2.93 15.625-4.39 32.715-4.39 51.269m666.07 161.133V216h165.53v750h-148.44zm-324.21-136.718v-10.254c0-40.039 4.39-76.498 13.18-109.375q13.185-49.806 39.06-85.45c17.25-24.088 38.74-42.643 64.45-55.664 25.72-13.021 55.34-19.531 88.87-19.531 29.95 0 56.15 6.999 78.61 20.996 22.47 13.672 41.67 32.878 57.62 57.617q23.925 37.11 39.06 86.914 15.15 49.317 22.95 106.446v12.207q-7.8 53.71-22.95 101.562-15.135 47.364-39.06 83.985c-23.925 36.621-35.32 43.619-58.1 57.617q-33.69 20.508-79.11 20.508c-33.52 0-63.15-6.674-88.86-20.02-25.39-13.346-46.71-32.064-63.97-56.152-16.92-24.089-29.78-52.409-38.57-84.961s-13.18-68.034-13.18-106.445m164.55-10.254v10.254q0 29.784 3.9 55.175c2.61 16.927 7 31.901 13.19 44.922 6.51 12.695 14.97 22.624 25.39 29.785 10.74 7.162 23.92 10.742 39.55 10.742 21.16 0 38.57-5.045 52.24-15.136 14-10.091 24.25-24.414 30.76-42.969q10.26-27.832 8.79-65.43v-38.574c.66-21.484-.81-40.364-4.39-56.641-3.58-16.601-9.28-30.436-17.09-41.503-7.49-11.068-17.09-19.369-28.81-24.903q-17.085-8.789-40.53-8.789-22.95 0-39.06 10.742c-10.42 7.162-18.88 17.253-25.39 30.274q-9.765 19.043-14.16 45.41c-2.93 17.253-4.39 36.133-4.39 56.641m614.31 277.832q-64.455 0-115.23-20.02c-33.86-13.672-62.5-32.389-85.94-56.152q-34.665-35.645-53.22-82.032c-12.05-30.924-18.07-63.639-18.07-98.144v-18.555q0-58.105 16.11-107.422c10.75-33.203 26.7-62.174 47.86-86.914q31.74-37.109 79.59-57.617c31.9-13.997 69.01-20.996 111.32-20.996q56.16 0 100.59 18.066c29.62 12.045 54.69 29.297 75.2 51.758 20.83 22.461 36.62 49.642 47.36 81.543 11.07 31.901 16.6 67.709 16.6 107.422v66.895h-431.64V650.57h271v-12.695c.32-17.578-2.77-32.552-9.28-44.922-6.19-12.37-15.3-21.81-27.35-28.32-12.04-6.511-26.69-9.766-43.94-9.766-17.9 0-32.72 3.906-44.43 11.719-11.4 7.812-20.35 18.555-26.86 32.226-6.18 13.347-10.58 28.809-13.18 46.387-2.61 17.578-3.91 36.133-3.91 55.664v18.555c0 19.531 2.6 37.272 7.81 53.223 5.54 15.95 13.35 29.622 23.44 41.015q15.63 16.602 37.11 25.879 21.975 9.277 49.8 9.277c22.47 0 44.6-4.231 66.41-12.695 21.81-8.463 40.53-22.461 56.15-41.992l74.71 88.867q-16.11 22.95-45.9 44.434c-19.53 14.323-42.97 26.041-70.31 35.156q-41.01 13.184-91.8 13.184m395.08-407.227V966h-164.55V437.68h153.81zm156.25-134.766-2.93 152.832q-9.765-.976-26.37-2.441c-11.06-.976-20.34-1.465-27.83-1.465-19.2 0-35.81 2.279-49.8 6.836-13.68 4.232-25.07 10.742-34.18 19.531q-13.185 12.696-19.53 32.227c-3.91 13.021-5.7 28.158-5.38 45.41l-29.78-19.531c0-35.482 3.42-67.708 10.25-96.68 7.17-29.297 17.26-54.525 30.28-75.683 13.02-21.485 28.81-37.924 47.36-49.317 18.56-11.719 39.39-17.578 62.5-17.578 8.14 0 16.11.488 23.93 1.465 8.13.976 15.3 2.441 21.48 4.394"/><path d="M3197.23 817.562c0-9.114-3.1-16.927-9.28-23.437-5.86-6.836-16.28-13.021-31.25-18.555-14.97-5.859-35.97-11.718-62.99-17.578q-38.58-8.301-72.75-21.972c-22.46-9.115-42.16-20.183-59.08-33.204-16.93-13.02-30.28-28.483-40.04-46.386q-14.16-26.856-14.16-61.524 0-33.692 14.16-63.476 14.64-30.274 42.48-53.223c18.88-15.625 41.83-27.832 68.84-36.621 27.02-9.115 57.78-13.672 92.29-13.672 47.53 0 88.54 7.324 123.05 21.973q51.75 21.484 79.59 60.547 28.32 38.574 28.32 89.355h-164.55q0-20.02-6.84-34.18-6.345-14.16-21-21.484-14.64-7.812-39.06-7.813c-11.39 0-21.81 2.116-31.25 6.348-9.11 4.232-16.44 10.091-21.97 17.578-5.54 7.487-8.3 16.276-8.3 26.367 0 7.162 1.63 13.672 4.88 19.532q5.37 8.3 16.11 15.625c7.17 4.557 16.28 8.789 27.35 12.695 11.07 3.581 24.41 6.836 40.04 9.766 35.48 6.51 68.68 15.787 99.61 27.832 30.92 12.044 55.99 29.134 75.19 51.269 19.53 22.136 29.3 51.921 29.3 89.356 0 23.437-5.37 45.084-16.12 64.941q-16.11 29.297-46.38 51.758c-20.18 14.648-44.44 26.042-72.76 34.18s-60.22 12.207-95.7 12.207c-50.45 0-93.1-8.952-127.93-26.856-34.83-18.229-61.2-41.015-79.1-68.359q-26.37-41.504-26.37-83.985h153.32c.65 16.276 4.56 29.623 11.72 40.039q11.235 15.626 29.79 22.95c18.555 7.324 26.69 7.324 42.97 7.324 14.97 0 27.34-2.116 37.1-6.348q15.15-6.347 22.95-17.09c5.21-7.487 7.82-16.113 7.82-25.879"/></mask><g fill=#fff><path d="M820.469 404.477 647.129 966H463.047l261.23-710.938h116.7zM964.023 966 790.195 404.477l-22.461-149.415h118.164L1148.59 966zm-6.835-265.137v132.325H592.441V700.863z"/><path d="M1271.21 550.473V966h-164.55V437.68h154.3zm-19.53 133.3-38.57.977q0-60.548 14.64-107.91c9.77-31.901 23.6-58.919 41.51-81.055q26.85-33.203 63.96-50.293c25.07-11.719 52.9-17.578 83.5-17.578 24.41 0 46.71 3.581 66.89 10.742q30.765 10.743 52.74 34.668c14.97 15.951 26.36 37.11 34.18 63.477 8.14 26.041 12.2 58.268 12.2 96.679V966h-165.52V632.992q0-31.738-8.79-48.34c-5.86-11.393-14.32-19.205-25.39-23.437s-24.58-6.348-40.53-6.348c-16.93 0-31.25 3.255-42.97 9.766q-17.58 9.765-28.32 27.344c-6.83 11.393-11.88 24.902-15.14 40.527-2.93 15.625-4.39 32.715-4.39 51.269m666.07 161.133V216h165.53v750h-148.44zm-324.21-136.718v-10.254c0-40.039 4.39-76.498 13.18-109.375q13.185-49.806 39.06-85.45c17.25-24.088 38.74-42.643 64.45-55.664 25.72-13.021 55.34-19.531 88.87-19.531 29.95 0 56.15 6.999 78.61 20.996 22.47 13.672 41.67 32.878 57.62 57.617q23.925 37.11 39.06 86.914 15.15 49.317 22.95 106.446v12.207q-7.8 53.71-22.95 101.562-15.135 47.364-39.06 83.985c-23.925 36.621-35.32 43.619-58.1 57.617q-33.69 20.508-79.11 20.508c-33.52 0-63.15-6.674-88.86-20.02-25.39-13.346-46.71-32.064-63.97-56.152-16.92-24.089-29.78-52.409-38.57-84.961s-13.18-68.034-13.18-106.445m164.55-10.254v10.254q0 29.784 3.9 55.175c2.61 16.927 7 31.901 13.19 44.922 6.51 12.695 14.97 22.624 25.39 29.785 10.74 7.162 23.92 10.742 39.55 10.742 21.16 0 38.57-5.045 52.24-15.136 14-10.091 24.25-24.414 30.76-42.969q10.26-27.832 8.79-65.43v-38.574c.66-21.484-.81-40.364-4.39-56.641-3.58-16.601-9.28-30.436-17.09-41.503-7.49-11.068-17.09-19.369-28.81-24.903q-17.085-8.789-40.53-8.789-22.95 0-39.06 10.742c-10.42 7.162-18.88 17.253-25.39 30.274q-9.765 19.043-14.16 45.41c-2.93 17.253-4.39 36.133-4.39 56.641m614.31 277.832q-64.455 0-115.23-20.02c-33.86-13.672-62.5-32.389-85.94-56.152q-34.665-35.645-53.22-82.032c-12.05-30.924-18.07-63.639-18.07-98.144v-18.555q0-58.105 16.11-107.422c10.75-33.203 26.7-62.174 47.86-86.914q31.74-37.109 79.59-57.617c31.9-13.997 69.01-20.996 111.32-20.996q56.16 0 100.59 18.066c29.62 12.045 54.69 29.297 75.2 51.758 20.83 22.461 36.62 49.642 47.36 81.543 11.07 31.901 16.6 67.709 16.6 107.422v66.895h-431.64V650.57h271v-12.695c.32-17.578-2.77-32.552-9.28-44.922-6.19-12.37-15.3-21.81-27.35-28.32-12.04-6.511-26.69-9.766-43.94-9.766-17.9 0-32.72 3.906-44.43 11.719-11.4 7.812-20.35 18.555-26.86 32.226-6.18 13.347-10.58 28.809-13.18 46.387-2.61 17.578-3.91 36.133-3.91 55.664v18.555c0 19.531 2.6 37.272 7.81 53.223 5.54 15.95 13.35 29.622 23.44 41.015q15.63 16.602 37.11 25.879 21.975 9.277 49.8 9.277c22.47 0 44.6-4.231 66.41-12.695 21.81-8.463 40.53-22.461 56.15-41.992l74.71 88.867q-16.11 22.95-45.9 44.434c-19.53 14.323-42.97 26.041-70.31 35.156q-41.01 13.184-91.8 13.184m395.08-407.227V966h-164.55V437.68h153.81zm156.25-134.766-2.93 152.832q-9.765-.976-26.37-2.441c-11.06-.976-20.34-1.465-27.83-1.465-19.2 0-35.81 2.279-49.8 6.836-13.68 4.232-25.07 10.742-34.18 19.531q-13.185 12.696-19.53 32.227c-3.91 13.021-5.7 28.158-5.38 45.41l-29.78-19.531c0-35.482 3.42-67.708 10.25-96.68 7.17-29.297 17.26-54.525 30.28-75.683 13.02-21.485 28.81-37.924 47.36-49.317 18.56-11.719 39.39-17.578 62.5-17.578 8.14 0 16.11.488 23.93 1.465 8.13.976 15.3 2.441 21.48 4.394"/><path d="M3197.23 817.562c0-9.114-3.1-16.927-9.28-23.437-5.86-6.836-16.28-13.021-31.25-18.555-14.97-5.859-35.97-11.718-62.99-17.578q-38.58-8.301-72.75-21.972c-22.46-9.115-42.16-20.183-59.08-33.204-16.93-13.02-30.28-28.483-40.04-46.386q-14.16-26.856-14.16-61.524 0-33.692 14.16-63.476 14.64-30.274 42.48-53.223c18.88-15.625 41.83-27.832 68.84-36.621 27.02-9.115 57.78-13.672 92.29-13.672 47.53 0 88.54 7.324 123.05 21.973q51.75 21.484 79.59 60.547 28.32 38.574 28.32 89.355h-164.55q0-20.02-6.84-34.18-6.345-14.16-21-21.484-14.64-7.812-39.06-7.813c-11.39 0-21.81 2.116-31.25 6.348-9.11 4.232-16.44 10.091-21.97 17.578-5.54 7.487-8.3 16.276-8.3 26.367 0 7.162 1.63 13.672 4.88 19.532q5.37 8.3 16.11 15.625c7.17 4.557 16.28 8.789 27.35 12.695 11.07 3.581 24.41 6.836 40.04 9.766 35.48 6.51 68.68 15.787 99.61 27.832 30.92 12.044 55.99 29.134 75.19 51.269 19.53 22.136 29.3 51.921 29.3 89.356 0 23.437-5.37 45.084-16.12 64.941q-16.11 29.297-46.38 51.758c-20.18 14.648-44.44 26.042-72.76 34.18s-60.22 12.207-95.7 12.207c-50.45 0-93.1-8.952-127.93-26.856-34.83-18.229-61.2-41.015-79.1-68.359q-26.37-41.504-26.37-83.985h153.32c.65 16.276 4.56 29.623 11.72 40.039q11.235 15.626 29.79 22.95c18.555 7.324 26.69 7.324 42.97 7.324 14.97 0 27.34-2.116 37.1-6.348q15.15-6.347 22.95-17.09c5.21-7.487 7.82-16.113 7.82-25.879"/></g><path stroke=#212121 stroke-width=20 d="M820.469 404.477 647.129 966H463.047l261.23-710.938h116.7zM964.023 966 790.195 404.477l-22.461-149.415h118.164L1148.59 966zm-6.835-265.137v132.325H592.441V700.863z" mask=url(#a) /><path stroke=#212121 stroke-width=20 d="M1271.21 550.473V966h-164.55V437.68h154.3zm-19.53 133.3-38.57.977q0-60.548 14.64-107.91c9.77-31.901 23.6-58.919 41.51-81.055q26.85-33.203 63.96-50.293c25.07-11.719 52.9-17.578 83.5-17.578 24.41 0 46.71 3.581 66.89 10.742q30.765 10.743 52.74 34.668c14.97 15.951 26.36 37.11 34.18 63.477 8.14 26.041 12.2 58.268 12.2 96.679V966h-165.52V632.992q0-31.738-8.79-48.34c-5.86-11.393-14.32-19.205-25.39-23.437s-24.58-6.348-40.53-6.348c-16.93 0-31.25 3.255-42.97 9.766q-17.58 9.765-28.32 27.344c-6.83 11.393-11.88 24.902-15.14 40.527-2.93 15.625-4.39 32.715-4.39 51.269zm666.07 161.133V216h165.53v750h-148.44zm-324.21-136.718v-10.254c0-40.039 4.39-76.498 13.18-109.375q13.185-49.806 39.06-85.45c17.25-24.088 38.74-42.643 64.45-55.664 25.72-13.021 55.34-19.531 88.87-19.531 29.95 0 56.15 6.999 78.61 20.996 22.47 13.672 41.67 32.878 57.62 57.617q23.925 37.11 39.06 86.914 15.15 49.317 22.95 106.446v12.207q-7.8 53.71-22.95 101.562-15.135 47.364-39.06 83.985c-23.925 36.621-35.32 43.619-58.1 57.617q-33.69 20.508-79.11 20.508c-33.52 0-63.15-6.674-88.86-20.02-25.39-13.346-46.71-32.064-63.97-56.152-16.92-24.089-29.78-52.409-38.57-84.961s-13.18-68.034-13.18-106.445zm164.55-10.254v10.254q0 29.784 3.9 55.175c2.61 16.927 7 31.901 13.19 44.922 6.51 12.695 14.97 22.624 25.39 29.785 10.74 7.162 23.92 10.742 39.55 10.742 21.16 0 38.57-5.045 52.24-15.136 14-10.091 24.25-24.414 30.76-42.969q10.26-27.832 8.79-65.43v-38.574c.66-21.484-.81-40.364-4.39-56.641-3.58-16.601-9.28-30.436-17.09-41.503-7.49-11.068-17.09-19.369-28.81-24.903q-17.085-8.789-40.53-8.789-22.95 0-39.06 10.742c-10.42 7.162-18.88 17.253-25.39 30.274q-9.765 19.043-14.16 45.41c-2.93 17.253-4.39 36.133-4.39 56.641zm614.31 277.832q-64.455 0-115.23-20.02c-33.86-13.672-62.5-32.389-85.94-56.152q-34.665-35.645-53.22-82.032c-12.05-30.924-18.07-63.639-18.07-98.144v-18.555q0-58.105 16.11-107.422c10.75-33.203 26.7-62.174 47.86-86.914q31.74-37.109 79.59-57.617c31.9-13.997 69.01-20.996 111.32-20.996q56.16 0 100.59 18.066c29.62 12.045 54.69 29.297 75.2 51.758 20.83 22.461 36.62 49.642 47.36 81.543 11.07 31.901 16.6 67.709 16.6 107.422v66.895h-431.64V650.57h271v-12.695c.32-17.578-2.77-32.552-9.28-44.922-6.19-12.37-15.3-21.81-27.35-28.32-12.04-6.511-26.69-9.766-43.94-9.766-17.9 0-32.72 3.906-44.43 11.719-11.4 7.812-20.35 18.555-26.86 32.226-6.18 13.347-10.58 28.809-13.18 46.387-2.61 17.578-3.91 36.133-3.91 55.664v18.555c0 19.531 2.6 37.272 7.81 53.223 5.54 15.95 13.35 29.622 23.44 41.015q15.63 16.602 37.11 25.879 21.975 9.277 49.8 9.277c22.47 0 44.6-4.231 66.41-12.695 21.81-8.463 40.53-22.461 56.15-41.992l74.71 88.867q-16.11 22.95-45.9 44.434c-19.53 14.323-42.97 26.041-70.31 35.156q-41.01 13.184-91.8 13.184zm395.08-407.227V966h-164.55V437.68h153.81zm156.25-134.766-2.93 152.832q-9.765-.976-26.37-2.441c-11.06-.976-20.34-1.465-27.83-1.465-19.2 0-35.81 2.279-49.8 6.836-13.68 4.232-25.07 10.742-34.18 19.531q-13.185 12.696-19.53 32.227c-3.91 13.021-5.7 28.158-5.38 45.41l-29.78-19.531c0-35.482 3.42-67.708 10.25-96.68 7.17-29.297 17.26-54.525 30.28-75.683 13.02-21.485 28.81-37.924 47.36-49.317 18.56-11.719 39.39-17.578 62.5-17.578 8.14 0 16.11.488 23.93 1.465 8.13.976 15.3 2.441 21.48 4.394z" mask=url(#a) /><path stroke=#212121 stroke-width=20 d="M3197.23 817.562c0-9.114-3.1-16.927-9.28-23.437-5.86-6.836-16.28-13.021-31.25-18.555-14.97-5.859-35.97-11.718-62.99-17.578q-38.58-8.301-72.75-21.972c-22.46-9.115-42.16-20.183-59.08-33.204-16.93-13.02-30.28-28.483-40.04-46.386q-14.16-26.856-14.16-61.524 0-33.692 14.16-63.476 14.64-30.274 42.48-53.223c18.88-15.625 41.83-27.832 68.84-36.621 27.02-9.115 57.78-13.672 92.29-13.672 47.53 0 88.54 7.324 123.05 21.973q51.75 21.484 79.59 60.547 28.32 38.574 28.32 89.355h-164.55q0-20.02-6.84-34.18-6.345-14.16-21-21.484-14.64-7.812-39.06-7.813c-11.39 0-21.81 2.116-31.25 6.348-9.11 4.232-16.44 10.091-21.97 17.578-5.54 7.487-8.3 16.276-8.3 26.367 0 7.162 1.63 13.672 4.88 19.532q5.37 8.3 16.11 15.625c7.17 4.557 16.28 8.789 27.35 12.695 11.07 3.581 24.41 6.836 40.04 9.766 35.48 6.51 68.68 15.787 99.61 27.832 30.92 12.044 55.99 29.134 75.19 51.269 19.53 22.136 29.3 51.921 29.3 89.356 0 23.437-5.37 45.084-16.12 64.941q-16.11 29.297-46.38 51.758c-20.18 14.648-44.44 26.042-72.76 34.18s-60.22 12.207-95.7 12.207c-50.45 0-93.1-8.952-127.93-26.856-34.83-18.229-61.2-41.015-79.1-68.359q-26.37-41.504-26.37-83.985h153.32c.65 16.276 4.56 29.623 11.72 40.039q11.235 15.626 29.79 22.95c18.555 7.324 26.69 7.324 42.97 7.324 14.97 0 27.34-2.116 37.1-6.348q15.15-6.347 22.95-17.09c5.21-7.487 7.82-16.113 7.82-25.879z" mask=url(#a) /><path fill=#212121 stroke=#fff stroke-width=10 d="M280.586 829.164v-160.41h113.652c21.306 0 37.758 3.667 49.754 10.565l.041.024.042.022c12.077 6.643 20.744 16.073 26.151 28.391l.021.046.021.046c5.816 12.55 8.814 27.589 8.814 45.261 0 14.222-3.084 27.086-9.19 38.687l-.012.023-.011.022c-5.626 10.955-15.034 20.039-28.615 27.141-13.029 6.66-30.862 10.182-53.852 10.182zM578.78 612.011c-6.938-3.835-14.448-7.135-22.523-9.908a147 147 0 0 0 5.415-2.807l.008-.005.009-.005c29.716-16.36 51.2-37.733 64.095-64.202 12.711-26.09 19.06-54.022 19.06-83.732 0-33.837-6.47-63.465-19.601-88.722-13.104-25.53-32.248-46.662-57.32-63.379-24.694-16.682-54.583-28.933-89.55-36.853-34.954-8.241-74.568-12.336-118.803-12.336H99.199V971h288.203c59.003 0 108.822-7.862 149.292-23.785 40.534-15.948 71.224-39.998 91.732-72.264 20.817-32.237 31.066-72.135 31.066-119.4 0-28.107-6.196-55.05-18.56-80.779-12.559-26.138-33.387-47.037-62.152-62.761zm-220.186-65.562h-78.008V392.387h78.984c25.065 0 45.091 2.9 60.288 8.482l.057.021.058.02c15.382 5.23 26.209 13.53 32.976 24.71 6.863 11.339 10.508 26.625 10.508 46.239 0 16.875-3.59 30.527-10.444 41.254l-.027.042-.026.042c-6.455 10.563-17.006 18.898-32.167 24.785-15.171 5.565-35.822 8.467-62.199 8.467z"/></svg></a> <button id=activate-menu class="button-link menu" aria-expanded=false aria-controls=nav-tray> Menu </button> <div aria-hidden=true role=menu id=nav-tray> <span id=top-triangle></span> <a itemprop=url href=/ class=block-link role=menuitem>Main</a> <a itemprop=url href=/about/ class=block-link role=menuitem>About me</a> <a itemprop=url href=/drums/ class=block-link role=menuitem>Drums</a> <a itemprop=url href=/posts/ class=block-link role=menuitem>Posts</a> </div> </div></nav> </div> <header class="sticky-stacky posts main-header"> <h1 itemprop=headline class="content name"> Sticky Stacky Peeking Navigation&nbsp;Bars </h1> </header> <main class="sticky-stacky posts"> <div class="content description" itemprop=description> <p> At the time of writing I work at a major e-commerce website. One of our design choices has been for the navigation to scroll with you. As the user scrolls down, one could have the navigation bars stack up. This pattern could fill the screen. Instead, this alternative design only shows the bottom most bar. As the user scrolls up, the navigation bars from above peek out from anywhere on the page. </p> </div> <p> This is a common design pattern. As I have fixed bugs with many navigation bars, I have reconsidered how complex the setup is. Here, I present a simpler, more general, and scalable way to support such a system. </p> <div class="sticky-container h3"> <nav class="sticky-stacky default-styles">How does it work?</nav> </div> <section> <div class=content> <p> At its core, this system is not complex. The markup is basic, as is the styles. The javascript can be challenging to wrap your head around, since it has to keep up with the scroll state. </p> </div> </section> <div class="sticky-container h3"> <nav class="sticky-stacky default-styles">What do you need for the markup?</nav> </div> <section> <div class=content> <ol> <li>A container that holds the height and position of the navigation bar on the page.</li> <li>The actual visible navigation bar that sticks when scrolling.</li> </ol> <pre class=code-container style=""><code><span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>&quot;sticky-container&quot;</span>&gt;</span>
  <span class=hljs-tag>&lt;<span class=hljs-name>div</span> <span class=hljs-attr>class</span>=<span class=hljs-string>&quot;sticky-stacky&quot;</span>&gt;</span>Sticky Nav Element<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>&gt;</span>
<span class=hljs-tag>&lt;/<span class=hljs-name>div</span>&gt;</span></code></pre> </div> </section> <div class="sticky-container h3"> <nav class="sticky-stacky default-styles">What do you need for the styles?</nav> </div> <section> <div class=content> <p> For the container element, your styles are simple: a block element that holds the height of your navigation bar. Through some experimenting, I found a good way to smooth rendering, and simplify the javascript. We calculate the height and store it in a CSS variable. </p> <p> For the navigation bar itself, the styles are still simple. You need a basic default state, and a fixed state. The default state uses <var>position: relative</var>. The fixed state moves it to <var>position: fixed</var>. The important piece keeps the navigation bars sticking in the right positions. </p> <p> To keep them sticking in the right positions, we depend on two properties. The <var>top</var> property is the sum of the heights of previous navigation bars. Again, I am using a CSS variable for simplicity. The <var>transform</var> property uses another CSS variable to translate the nav bar up and down. This translation handles the peeking logic. The CSS variable we use here will be quite dynamic, and updated with JavaScript. </p> <pre class=code-container style=""><code><span class=hljs-selector-class>.sticky-container</span> {
  <span class=hljs-attribute>height</span>: <span class=hljs-built_in>var</span>(--sticky-container-height);
  <span class=hljs-attribute>position</span>: relative;
  <span class=hljs-attribute>z-index</span>: <span class=hljs-number>1000</span>-<span class=hljs-number>2</span>;

  <span class=hljs-selector-class>.sticky-stacky</span> {
    <span class=hljs-attribute>position</span>: relative;
    <span class=hljs-attribute>z-index</span>: <span class=hljs-number>1000</span>-<span class=hljs-number>1</span>;

    &amp;<span class=hljs-selector-class>.fixed</span> {
      <span class=hljs-attribute>position</span>: fixed;
      <span class=hljs-attribute>z-index</span>: <span class=hljs-number>1000</span>;
      <span class=hljs-attribute>top</span>: <span class=hljs-built_in>var</span>(--previous-heights);
      <span class=hljs-attribute>transform</span>: <span class=hljs-built_in>translateY</span>(<span class=hljs-built_in>var</span>(--sticky-stacky-transform));
    }
  }
}
</code></pre> </div> </section> <div class="sticky-container h3"> <nav class="sticky-stacky default-styles">The JavaScript that drives the scrolling behavior.</nav> </div> <section> <div class=content> <p> Breaking the algorithm into two pieces is the most organized. A class that controls all the sticky navigation bars on the page: StickyController. And a class that updates each sticky navigation bar: StickyStacky. </p> <p> Read through the comments in the JavaScript below. The explanation makes the most sense to me in context. </p> <pre class=code-container style=""><code><span class=hljs-comment>/**
 * class StickyStacky element controller
 */</span>
<span class=hljs-keyword>class</span> <span class="hljs-title class_">StickyStacky</span> {
  #previousHeights;
  #containerElement;
  stickyElement;
  top;
  height;
  isStuck;

  <span class=hljs-comment>/*
    Simply get the peeking value stored in the CSS variable
  */</span>
  #<span class="hljs-title function_">getCurrentTransform</span>(<span class=hljs-params></span>) {
    <span class=hljs-keyword>const</span> valueString = <span class="hljs-variable language_">document</span>.<span class=hljs-property>documentElement</span>.<span class=hljs-property>style</span>.<span class="hljs-title function_">getPropertyValue</span>(<span class=hljs-string>&#x27;--sticky-stacky-transform&#x27;</span>);
    <span class=hljs-keyword>return</span> <span class="hljs-title class_">Number</span>(valueString.<span class="hljs-title function_">slice</span>(<span class=hljs-number>0</span>, -<span class=hljs-number>2</span>)); <span class=hljs-comment>// slice removes the &#x27;px&#x27; from the value.</span>
  }

  <span class=hljs-comment>/*
    Recalculates the sticky-container-height CSS variable
  */</span>
  <span class="hljs-title function_">update</span>(<span class=hljs-params></span>) {
    <span class=hljs-comment>/* 
      Determine if the bar should be stuck by comparing the (scroll position 
      of page) + (how much the stack is peeking) to the top of the .sticky-container element.
    */</span>
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>isStuck</span> = <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span> + (<span class="hljs-variable language_">this</span>.#previousHeights + <span class="hljs-variable language_">this</span>.#<span class="hljs-title function_">getCurrentTransform</span>()) &gt; <span class="hljs-variable language_">this</span>.<span class=hljs-property>top</span>;

    <span class=hljs-comment>// add/remove .fixed class based on stuck status.</span>
    <span class=hljs-keyword>if</span> (<span class="hljs-variable language_">this</span>.<span class=hljs-property>isStuck</span>) {
      <span class="hljs-variable language_">this</span>.<span class=hljs-property>stickyElement</span>.<span class=hljs-property>classList</span>.<span class="hljs-title function_">add</span>(<span class=hljs-string>&#x27;fixed&#x27;</span>);
    } <span class=hljs-keyword>else</span> {
      <span class="hljs-variable language_">this</span>.<span class=hljs-property>stickyElement</span>.<span class=hljs-property>classList</span>.<span class="hljs-title function_">remove</span>(<span class=hljs-string>&#x27;fixed&#x27;</span>);
    }

    <span class=hljs-comment>// update top value, height value, and set the container height CSS variable.</span>
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>top</span> = <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span> + <span class="hljs-variable language_">this</span>.#containerElement.<span class="hljs-title function_">getBoundingClientRect</span>().<span class=hljs-property>top</span>;
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>height</span> = <span class="hljs-variable language_">this</span>.<span class=hljs-property>stickyElement</span>.<span class=hljs-property>offsetHeight</span>;
    <span class="hljs-variable language_">this</span>.#containerElement.<span class=hljs-property>style</span>.<span class="hljs-title function_">setProperty</span>(<span class=hljs-string>&#x27;--sticky-container-height&#x27;</span>, <span class=hljs-string>`<span class=hljs-subst>${<span class="hljs-variable language_">this</span>.height}</span>px`</span>);
  }

  <span class=hljs-comment>/*
    Take the `heights` parameter and set it as a CSS variable.
    Note: this value will be different for each StickyStack instance. 
      It&#x27;s the sum of the heights of the StickyStacks earlier in the DOM.
  */</span>
  <span class="hljs-title function_">setPreviousHeights</span>(<span class=hljs-params>heights</span>) {
    <span class="hljs-variable language_">this</span>.#previousHeights = heights;
    <span class="hljs-variable language_">this</span>.#containerElement.<span class=hljs-property>style</span>.<span class="hljs-title function_">setProperty</span>(<span class=hljs-string>&#x27;--previous-heights&#x27;</span>, <span class=hljs-string>`<span class=hljs-subst>${heights}</span>px`</span>);
  }

  <span class="hljs-title function_">constructor</span>(<span class=hljs-params>containerElement</span>) {
    <span class="hljs-variable language_">this</span>.#containerElement = containerElement;
    <span class="hljs-variable language_">this</span>.#previousHeights = <span class=hljs-number>0</span>;
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>stickyElement</span> = <span class="hljs-variable language_">this</span>.#containerElement.<span class="hljs-title function_">querySelector</span>(<span class=hljs-string>&#x27;.sticky-stacky&#x27;</span>);
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>top</span> = <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span> + <span class="hljs-variable language_">this</span>.#containerElement.<span class="hljs-title function_">getBoundingClientRect</span>().<span class=hljs-property>top</span>;
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>height</span> = <span class="hljs-variable language_">this</span>.<span class=hljs-property>stickyElement</span>.<span class=hljs-property>offsetHeight</span>;
    <span class="hljs-variable language_">this</span>.<span class=hljs-property>isStuck</span> = <span class=hljs-literal>false</span>;
  }
}






<span class=hljs-comment>/**
 * class StickyController global controller for StickyStacky elements
 */</span>
<span class=hljs-keyword>class</span> <span class="hljs-title class_">StickyController</span> {
  #scrollHeight;
  #transformTop;
  #maxTransform;
  #stickyStacks;

  <span class=hljs-comment>/*
    Simply filter the stuck StickyStacks (isStuck === true) from all StickyStacks
  */</span>
  #<span class="hljs-title function_">getStuckStacks</span>(<span class=hljs-params></span>) {
    <span class=hljs-keyword>return</span> <span class="hljs-variable language_">this</span>.#stickyStacks.<span class="hljs-title function_">filter</span>(<span class=hljs-function>(<span class=hljs-params>stickyStack</span>) =&gt;</span> stickyStack.<span class=hljs-property>isStuck</span>);
  }

  <span class=hljs-comment>/*
    Take the StickyStacks that are stuck (isStuck === true), then
    sort them by visual order on the page. Finally, loop over
    them to apply the shadows appropriately, and set the previous 
    height for each stuck stack.
  */</span>
  #<span class="hljs-title function_">calculateMaxTransform</span>(<span class=hljs-params></span>) {
    <span class=hljs-keyword>let</span> height = <span class=hljs-number>0</span>;
    <span class=hljs-keyword>const</span> stuckStacks = <span class="hljs-variable language_">this</span>.#<span class="hljs-title function_">getStuckStacks</span>()
      .<span class="hljs-title function_">sort</span>(<span class=hljs-function>(<span class=hljs-params>stackA, stackB</span>) =&gt;</span> (stackA.<span class=hljs-property>top</span> &lt; stackB.<span class=hljs-property>top</span> ? -<span class=hljs-number>1</span> : <span class=hljs-number>1</span>));
    
    stuckStacks.<span class="hljs-title function_">forEach</span>(<span class=hljs-function>(<span class=hljs-params>stuckStack, index</span>) =&gt;</span> {
      <span class=hljs-keyword>if</span> (index === stuckStacks.<span class=hljs-property>length</span> - <span class=hljs-number>1</span>) { 
        <span class=hljs-comment>// last stuck element gets the shadow</span>
        <span class="hljs-variable language_">this</span>.#maxTransform = <span class=hljs-number>0</span> - height; <span class=hljs-comment>// set global variable. Must be a negative number.</span>
        <span class=hljs-comment>// stuckStack.stickyElement.classList.add(&#x27;shadow&#x27;);</span>
      } <span class=hljs-keyword>else</span> {
        <span class=hljs-comment>// other stuck elements lose the shadow</span>
        <span class=hljs-comment>// stuckStack.stickyElement.classList.remove(&#x27;shadow&#x27;);</span>
      }
      <span class=hljs-comment>// accumulate heights and set them, just like in recalculateHeights()</span>
      stuckStack.<span class="hljs-title function_">setPreviousHeights</span>(height);
      height += stuckStack.<span class=hljs-property>height</span>;
    });
  }

  <span class=hljs-comment>/*
    Loop through the StickyStacks, accumulate the heights of each
    StickyStack and pass those previous height sums into the StickyStacks
  */</span>
  #<span class="hljs-title function_">recalculateHeights</span>(<span class=hljs-params></span>) {
    <span class=hljs-keyword>let</span> height = <span class=hljs-number>0</span>;
    <span class="hljs-variable language_">this</span>.#stickyStacks.<span class="hljs-title function_">forEach</span>(<span class=hljs-function>(<span class=hljs-params>stickyStack</span>) =&gt;</span> {
      stickyStack.<span class="hljs-title function_">update</span>();
      stickyStack.<span class="hljs-title function_">setPreviousHeights</span>(height);
      height += stickyStack.<span class=hljs-property>height</span>;
    });
  }

  <span class=hljs-comment>/*
    [Critical function] Calculates the scroll directin and adjusts
    the sticky stack peeking depth.
  */</span>
  #<span class="hljs-title function_">update</span>(<span class=hljs-params></span>) {
    <span class="hljs-variable language_">this</span>.#<span class="hljs-title function_">calculateMaxTransform</span>(); <span class=hljs-comment>// sets maxTransform value.</span>

    <span class=hljs-comment>// Don&#x27;t make any changes if the scroll depth hasn&#x27;t changed.</span>
    <span class=hljs-keyword>if</span> (<span class="hljs-variable language_">this</span>.#scrollHeight !== <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span>) { 
      <span class=hljs-comment>// determine the scroll depth difference</span>
      <span class=hljs-keyword>const</span> diff = <span class="hljs-variable language_">this</span>.#scrollHeight - <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span>; 
      <span class=hljs-comment>// set global variable value for next time. Effectively caching the current value for later.</span>
      <span class="hljs-variable language_">this</span>.#scrollHeight = <span class="hljs-variable language_">window</span>.<span class=hljs-property>pageYOffset</span>; 
      <span class=hljs-comment>// calculate the peeking depth. It cannot be greater than zero or less than the maxTransform</span>
      <span class="hljs-variable language_">this</span>.#transformTop = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-variable language_">this</span>.#transformTop + diff, <span class=hljs-number>0</span>), <span class="hljs-variable language_">this</span>.#maxTransform);
      <span class=hljs-comment>// set the peeking depth in the CSS variable</span>
      <span class="hljs-variable language_">document</span>.<span class=hljs-property>documentElement</span>.<span class=hljs-property>style</span>.<span class="hljs-title function_">setProperty</span>(<span class=hljs-string>&#x27;--sticky-stacky-transform&#x27;</span>, <span class=hljs-string>`<span class=hljs-subst>${<span class="hljs-variable language_">this</span>.#transformTop}</span>px`</span>);
    }

    <span class="hljs-variable language_">this</span>.#<span class="hljs-title function_">recalculateHeights</span>(); <span class=hljs-comment>// update the StickyStack height and previousHeights again</span>
  }

  <span class="hljs-title function_">constructor</span>(<span class=hljs-params>containerNodeList</span>) {
    <span class=hljs-comment>/* 
      Since the querySelectorAll function returns NodeLists,
      convert this to an Array so we can use .map and .forEach on it.
    */</span>
    <span class=hljs-keyword>const</span> containerArray = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(containerNodeList);
    <span class="hljs-variable language_">this</span>.#scrollHeight = <span class=hljs-number>0</span>;
    <span class="hljs-variable language_">this</span>.#transformTop = <span class=hljs-number>0</span>;
    <span class="hljs-variable language_">this</span>.#maxTransform = <span class=hljs-number>0</span>;

    <span class=hljs-comment>/*
      Sort the sticky stack elements in visual order from top to bottom.
    */</span>
    <span class="hljs-variable language_">this</span>.#stickyStacks = containerArray
      .<span class="hljs-title function_">map</span>(<span class=hljs-function>(<span class=hljs-params>containerElement</span>) =&gt;</span> <span class=hljs-keyword>new</span> <span class="hljs-title class_">StickyStacky</span>(containerElement))
      .<span class="hljs-title function_">sort</span>(<span class=hljs-function>(<span class=hljs-params>stackA, stackB</span>) =&gt;</span> (stackA.<span class=hljs-property>top</span> &lt; stackB.<span class=hljs-property>top</span> ? -<span class=hljs-number>1</span> : <span class=hljs-number>1</span>));

    <span class=hljs-comment>/*
      Set incrementally higher z-index values to ensure the 
      shadows cascade without overlapping
    */</span>
    <span class="hljs-variable language_">this</span>.#stickyStacks.<span class="hljs-title function_">forEach</span>(<span class=hljs-function>(<span class=hljs-params>stack, index</span>) =&gt;</span> {
      stack.<span class=hljs-property>stickyElement</span>.<span class=hljs-property>style</span>.<span class=hljs-property>zIndex</span> = <span class=hljs-number>10000</span> + index;
    });

    <span class=hljs-comment>/*
      Update _AFTER_ the scroll event fires. I tried using other kinds of run loops,
      but this one performs the best without odd delayed overlaps.
      Do not debounce.
    */</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class=hljs-string>&#x27;scroll&#x27;</span>, <span class="hljs-variable language_">this</span>.#update.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));

    <span class=hljs-comment>/*
      Running this twice at the beginning with these spaces seems to work well.
    */</span>
    <span class=hljs-built_in>setTimeout</span>(<span class="hljs-variable language_">this</span>.#update.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class=hljs-number>0</span>);
    <span class=hljs-built_in>setTimeout</span>(<span class="hljs-variable language_">this</span>.#update.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class=hljs-number>100</span>);
  }
}





<span class=hljs-comment>/*
  Module initializer function.
*/</span>
<span class="hljs-variable language_">module</span>.<span class=hljs-property>exports</span>.<span class=hljs-property>init</span> = <span class=hljs-function>() =&gt;</span> {
  <span class=hljs-comment>/* get all of the .sticky-container elements on the page */</span>
  <span class=hljs-keyword>const</span> stickyContainers = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class=hljs-string>&#x27;.sticky-container&#x27;</span>);

  <span class=hljs-comment>/*
    Instantiating a StickyController class with the stickyContainers
    triggers the calculation and update of all sticky stacky elements
  */</span>
  <span class=hljs-keyword>new</span> <span class="hljs-title class_">StickyController</span>(stickyContainers);
};
</code></pre> </div> </section> <div class="sticky-container h3"> <nav class="sticky-stacky default-styles">Conclusion</nav> </div> <section> <div class=content> <p>I hope this has been a helpful and informative way to combine JavaScript, HTML, and CSS in a robust and scalable way. The patterns I use in this solution are more valuable than the solution itself.</p> </div> </section> </main> <link rel=preload media=all href=/styles/modules/footer.css lazyload onload="this.onload=null,this.rel=&#34;stylesheet&#34;" as=style /> <noscript> <link rel=stylesheet media=all href=/styles/modules/footer.css /> </noscript> <footer class="sticky-stacky posts" role=navigation aria-label="Site footer"> <div class=content> <div class=copyright> <span> <a itemprop=url href=/ class=brand aria-label="Brian Anders home page"><img src=/images/logo.svg alt="Brian Anders logo" height=34 width=100 /></a> </span> <span>&copy; 2025</span> </div> <div class=links> <span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy="Bat Lessons" href=https://batlessons.com class=block-link>Bat Lessons&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url type=block copy="Banders Drums" href=/drums class=block-link>Banders Drums&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=Github href=https://github.com/briananders class=block-link>Github&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=Instagram href=https://instagram.com/imbanders class=block-link>Instagram&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=Last.fm href=https://www.last.fm/user/imbanders class=block-link>Last.fm&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=LinkedIn href=https://www.linkedin.com/in/andersbrian/ class=block-link>LinkedIn&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=me target=blank type=block copy=Mastodon href=https://mastodon.social/@banders class=block-link>Mastodon&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy="Blue Sky" href=https://bsky.app/profile/imbanders.bsky.social class=block-link>Blue Sky&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=Twitter href=https://twitter.com/imbanders class=block-link>Twitter&nbsp;<b>&gt;</b></a></span><span class=block-link-wrapper><a itemprop=url rel=noopener target=blank type=block copy=YouTube href=https://www.youtube.com/@bandersdrums class=block-link>YouTube&nbsp;<b>&gt;</b></a></span> </div> </div> </footer> </body> </html> 